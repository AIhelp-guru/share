<!DOCTYPE html> 
<html>
   <head>
      <title>My notes</title>
      <link rel="stylesheet" type="text/css" href="study.css">
      <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
      <script src="askai.js"></script>
   </head>
   <body>
      <center>
      <h4 id="topic"></h4>
      <h2 class="section-heading">Main question</h2>
      <div class="prefilled-content" id="intro">
   
      </div>
   </center>
      <div class="menu">
      
      </div>
      <div class="left-panel">
     
     
      <div class="section">
         <h2 class="section-heading">Key Concepts </h2>
         
            <details style="position: absolute;background: #fffcbd;max-height: 300px;width: 35%; overflow:auto;">
               <summary>Hint</summary>
               <div id="key_concepts"></div>
            </details>
            <div class="prefilled-content" contenteditable="true" style="height:300px;overflow:auto">
         </div>
      </div>
      <div class="section">
         <h2 class="section-heading">Questions</h2>
         
            <details style="position: absolute;background: #fffcbd;max-height: 300px;width: 35%; overflow:auto;">
               <summary>Hint</summary>
               <div id="qs"></div>
            </details>
            <div class="prefilled-content" contenteditable="true" style="height:300px;overflow:auto" ></div>
         </div>
      </div>

      <div class="section">
         <h2 class="section-heading">Research Resources</h2>
         <div class="prefilled-content" id="research">
         
         </div>
      </div>
   </div>
   <div class="right-panel">
      <div class="section">
        <code>
         <h2 class="section-heading">My notes</h2>
         <div class="student-input" contenteditable="true" placeholder="Enter your key findings and information here...">
            <li></li>
         </div>
        </code>
        <button class="askai" prompt="Please review and give feedback :" >Ask</button>
         <div class="guidance"> In this section, summarize the key information and findings you have learned about Newton's Laws of Motion. Highlight the main principles, mathematical relationships, and practical applications. </div>
      </div>
      
      <div class="section">
         <h2 class="section-heading">Further Questions</h2>
         <div class="student-input" contenteditable="true" placeholder="Enter your further questions here...">
            <li></li>
         </div>
         <div class="guidance"> List any additional questions or areas of curiosity that have arisen during your exploration of Newton's Laws of Motion. These could be topics you would like to investigate further or specific applications you would like to explore in more depth. </div>
      </div>
      
   </div>
      <script>
         var sdata;
        $(".askai").click(function(){
            prompt = $(this).attr("prompt")+ $(this).prev().text();
            var $temp = $('<input>');
             $("body").append($temp);
             $temp.val(prompt).select();
             document.execCommand("copy");
             $temp.remove();
        })
      $.get("https://script.google.com/macros/s/AKfycbzxpRdzWBDqR5487v6Ex_VomXkQ-FN756O11MUyuJwADVAn5NF2EZ4vP8kQX5QA4Pi9lw/exec",function(data){
         sdata = data;

         menu = addsubjects();
         $(".menu").html(menu);

         load(0);
  
      });

      function load(id){
         $("#intro").html(sdata[id][3]);
         $("#topic").html(sdata[id][0]+"-"+sdata[id][1]+":"+sdata[3][2]);
         $("#key_concepts").html(sdata[id][4]);
         $("#qs").html(((sdata[id][5]).split("?")).join(" ? <br>"));
         $("#research").html(sdata[id][6])
      }
    /**
      function  addsubjects(){
         for(i=0;i<sdata.length;i++){
            $("#subjects").append("<option value='"+i+"'>"+sdata[i][0]+" - "+sdata[i][1] + " : " + sdata[i][2] +"</option>");
         }
         $("#subjects").change(function(){
            load($(this).val());
         })
      } **/
      function addsubjects() {
            data = sdata;
            
            const groups = new Map();
            data.forEach(([group1, group2, item]) => {
               if (!groups.has(group1)) {
                  groups.set(group1, new Map());
               }
               if (!groups.get(group1).has(group2)) {
                  groups.get(group1).set(group2, []);
               }
               groups.get(group1).get(group2).push(item);
            });

            // Create the HTML menu structure
            let menuHtml = '';
            menuindex = 0;
            groups.forEach((group2Map, group1) => {
               menuHtml += `<h3>${group1}</h3>`;
               group2Map.forEach((items, group2) => {
                 
                  items.forEach((item) => {
                  menuHtml += `<button class="menu-item" onclick="load(${menuindex++})">${item}</button><br>`;
                  });
                  
               });
            });
            
            return menuHtml;
      }
      </script>


   </body>
</html>
